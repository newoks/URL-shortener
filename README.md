# Сервис для генерации коротких ссылок

### Реализация с использованием FastAPI + PostgreSQL 

#### Генерация уникальных коротких ссылок:

Логика заключается в использовании целочисленного идентификатора (счетчика),
хранящегося в базе данных, и преобразование целого числа в строку символов. 

Символ URL может быть одним из следующих (в сумме 62 возможных символа):
- Алфавит нижнего регистра [от a до z], всего 26 символов. 
- Алфавит верхнего регистра [от A до Z], всего 26 символов. 
- Цифра [от 0 до 9], всего 10 символов


Чтобы убедиться, что каждая короткая ссылка уникальна, мы полагаемся на счетчики.
Мы сохраняем текущее значение счетчика в таблице counters в базе данных.
Значение счетчика увеличивается на единицу каждый раз, когда генерируется короткая ссылка.
***

#### Endpoints:
- Создание короткой ссылки (на вход передаём полный url, в ответ получаем короткий url)
- Удаление ссылки (на вход ранее сгенерированный короткий url, ответ статус операции)
- Получение полного url (на вход короткий url, в ответ полный url)


***
#### Пример работы сервиса:
1. Создание короткой ссылки:
```
Method: POST
URL: http://127.0.0.1:5000/shortener/
Body: {"full_url": "https://music.yandex.ru/album/5307396/track/12345"}

Response: {"short_url": "const.com/EMJF"}
```
2. Получение полной ссылки:
```
Method: GET
URL: http://127.0.0.1:5000/shortener/?short_url=const.com%2FEMJF

Response: {"full_url": "https://music.yandex.ru/album/5307396/track/12345"}
```
3. Удаление ссылки:
```
Method: DELETE
URL: http://127.0.0.1:5000/shortener/?short_url=const.com%2FEMJF

Response: 204
```
Примечание: ```%2F = /```
***


### Запуск
1. Создать и заполнить ```.env``` (пример в ```.env.example```)
2. Запустить docker-compose файл
```bash
docker-compose up --build -d
```
